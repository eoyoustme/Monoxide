-- Kiểm tra phòng hiện tại
local entityModel = true
local latestRoom = game.ReplicatedStorage.GameData.LatestRoom.Value

-- Nếu trong Seek, Figure hoặc phòng 90+
if game.Workspace:FindFirstChild("SeekMovingNewClone") or 
   latestRoom == 50 or latestRoom == 100 or  
   (latestRoom >= 90 and latestRoom <= 100) then
    entityModel = false
end

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid")
local HRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

-- Phát âm thanh cảnh báo trước
local warningSound = Instance.new("Sound")
warningSound.SoundId = "rbxassetid://6314880174" -- Thay bằng ID âm thanh cảnh báo của bạn
warningSound.Volume = 2
warningSound.Parent = workspace
warningSound:Play()

-- Đợi cho đến khi người chơi chuyển sang phòng mới (mở cửa mới)
local initialRoom = latestRoom
game.ReplicatedStorage.GameData.LatestRoom:GetPropertyChangedSignal("Value"):Wait()
while game.ReplicatedStorage.GameData.LatestRoom.Value <= initialRoom do
    task.wait()
end

-- Tiến hành spawn thực thể
local depthsTer = game:GetObjects("rbxassetid://88931316349582")[1]
depthsTer.Parent = game.Workspace

local part = depthsTer:FindFirstChildWhichIsA("BasePart") or depthsTer:FindFirstChildWhichIsA("Part")
part.CFrame = game.Workspace.CurrentRooms:GetChildren()[#game.Workspace.CurrentRooms:GetChildren() - 1].Parts.Floor.CFrame + Vector3.new(0, 6, 0)

local Kill = true

-- Vị trí ban đầu
local lastPos = HRP.Position
local damageInterval = 0.7
local damageAmount = 10
local activeTime = 5 -- seconds

-- Coroutine xử lý sát thương nếu di chuyển
coroutine.wrap(function()
    local elapsedTime = 0
    while elapsedTime < activeTime do
        wait(damageInterval)
        local currentPos = HRP.Position
        if (currentPos - lastPos).magnitude > 0.5 then
            require(LocalPlayer.PlayerGui.MainUI.Initiator.Main_Game).caption("Đứng yên nếu không muốn mất máu!", true)
            if Humanoid then
                Humanoid.Health -= damageAmount
            end
            lastPos = currentPos
        end
        elapsedTime += damageInterval
    end

    Kill = false
    depthsTer:Destroy()

    -- Hiện thành tựu
    local achievementGiver = loadstring(game:HttpGet("https://raw.githubusercontent.com/RegularVynixu/Utilities/main/Doors/Custom%20Achievements/Source.lua"))()
    achievementGiver({
        Title = "Stop move",
        Desc = "friend of seek?",
        Reason = "Encounter Twiter",
        Image = "rbxassetid://"
    })
end)()
